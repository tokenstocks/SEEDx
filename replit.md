# SEEDx MVP - Sustainable Ecosystem for Economic Development exchange

## Overview
SEEDx is a blockchain-based regenerative capital platform built on the Stellar network. Its primary purpose is to connect liquidity providers ("Primers") with token traders ("Regenerators") to fund agricultural projects. The platform facilitates tokenized agricultural participation, automated cashflow distribution, and capital regeneration. SEEDx aims to mitigate securities classification risk by using SEC-compliant language, emphasizing utility tokens and participation. Key capabilities include secure authentication, KYC, multi-currency wallet management, and a premium mobile-first interface, all designed to foster a sustainable ecosystem for economic development.

## User Preferences
Preferred communication style: Simple, everyday language.

## System Architecture

### Core Design
The platform features a mobile-first, fintech-inspired design. The frontend is developed using React, TypeScript, Vite, Wouter, and TanStack Query, with styling provided by Tailwind CSS and Shadcn UI. The backend is powered by Node.js, Express.js, and TypeScript, utilizing Drizzle ORM with PostgreSQL. Authentication relies on JWT with bcrypt for password hashing and AES-256-CBC for encryption. Stellar SDK is integrated for blockchain operations, supporting a hybrid wallet model with encrypted Stellar secret keys.

### UI/UX Decisions
The platform offers an investor-grade presentation with Framer Motion animations, dynamic typography, and comprehensive mobile responsiveness. The design incorporates SEC-compliant language to reduce securities classification risk. The landing page is structured with dual audience toggles, how-it-works sections, featured farms, benefits, a comprehensive FAQ, and conversion-focused CTAs. 

**Regenerator User Experience (November 2025):**
- **Dual-Page Architecture:** Dashboard (Portfolio.tsx at `/regenerator-dashboard`) serves as main landing page with capital overview and quick actions. Settings page (RegeneratorProfile.tsx at `/regenerator-profile`) focuses on account management with full transaction history.
- **Dashboard Features:** Hero capital value card displaying Total Capital Value (NGNTS + USDC converted to NGN, excluding XLM gas), visual progress bars showing asset allocation percentages, 4-metric stats grid (Total Contributed, Participation Units, Active Cooperatives, Total Distributions), portfolio holdings preview, recent activity timeline (last 5 transactions), member benefits card, and quick action sidebar for common tasks.
- **Settings Features:** Tabbed interface (Account/Wallet tabs) with account information, KYC document management, complete wallet details (address, balances, activation status), bank deposit wizard (4-step NGN transfer flow), and full transaction history (all deposits, not limited).
- **Design System:** Premium RWA platform aesthetic inspired by BlackRock BUIDL, Ondo Finance, and Securitize. Glassmorphism cards (bg-white/5, backdrop-blur-md, border-white/10) with gradient top borders (emerald for NGNTS, blue for USDC, purple for highlights). SEC-friendly cooperative language throughout ("capital" not "deposit", "participation" not "investment", "cooperative" not "project").
- **Real-Time Data:** Wallet balances auto-refresh every 30 seconds, exchange rates every 60 seconds, with "Live" badge indicators when data is fresh. XLM isolated as "Network Gas" with info tooltip, excluded from portfolio metrics.
- **Navigation:** Unified header with role-specific links. Settings accessible via header link and quick actions. First-time users see onboarding banner for incomplete KYC/wallet activation steps.

A unified header ensures consistent navigation, adapting links and wallet indicators based on user roles. Onboarding for Regenerators is a hybrid flow combining modal and persistent banner notifications, guiding users through KYC and wallet activation.

### Technical Implementations
- **Authentication & KYC:** JWT-based authentication with automatic session expiry. The system includes user registration (Primer/Regenerator) and an admin-reviewed KYC process with a comprehensive audit trail for all decisions.
- **Stellar Integration:** Manages on-chain operations (testnet/mainnet), wallet activation, NGNTS token issuance, and a 4-wallet architecture (Operations, Treasury, Distribution, Liquidity Pool). This includes friendbot auto-activation for testnet and a robust wallet activation workflow requiring admin approval for NGNTS and USDC trustlines.
- **User Roles (Primer & Regenerator):** Primers contribute capital to a Liquidity Pool via an admin-approved workflow, tracked on a dedicated dashboard. Regenerators purchase farm project tokens, with a dashboard displaying portfolio holdings and an activity timeline.
- **Investment & Portfolio Management:** Supports full on-chain settlement for multi-currency investments (NGN/NGNTS, USDC, XLM). The investment flow involves establishing project token trustlines, on-chain payment transfers, token delivery, and atomic database updates, with best-effort automatic refunds for failed token deliveries.
- **Regenerative Capital Architecture:** A multi-pool system with NAV-based token pricing and automated cashflow distribution.
- **Token Marketplace:** An internal peer-to-peer marketplace with an order book, NAV-based price discovery, and atomic balance transfers.
- **NGNTS Burning:** NGNTS tokens are burned upon NGN withdrawal to maintain a 1:1 peg.
- **Admin Dashboards:** APIs and UI for managing platform operations, users, and transactions.
- **Admin Investment Monitoring (November 2025):** Comprehensive investment tracking system at `/admin/investments` with real-time dashboard showing total invested (all-time, today, 24h, average), investment feed table with pagination (50 per page), filters (currency: NGN/NGNTS/USDC/XLM, search by user email/project name), and CSV export. Detail drawer displays user info (email, KYC status, wallet address), investment details (amount, tokens, NAV at purchase vs current, % change), payment flow visualization (User → LP Pool → Tokens), and Stellar transaction verification with Expert link. Backend endpoints: GET /api/admin/investments (list with filters), GET /api/admin/investments/stats (aggregate metrics), GET /api/admin/investments/:id (detailed view). Design follows premium RWA aesthetic with glassmorphism cards, emerald/blue/purple accents, and Live data indicators.
- **Admin LP Pool Monitoring (November 2025):** Dedicated liquidity pool health dashboard at `/admin/lp-pool` with live Stellar balance queries and auto-refresh (30s toggleable). Features: 4 hero stats cards (Total Pool Value NGN, 24h Inflows, 24h Outflows, Regeneration Rate %), asset composition bars showing NGNTS/USDC/XLM percentages, critical alert banner (red if pool <₦1M), capital flow summary (net flow with all-time stats), and wallet address display. Backend endpoints: GET /api/admin/lp-pool/balance (queries Stellar Horizon for live balances using getAllRates() helper, type-safe balance parsing with union narrowing, 502 error handling for network failures), GET /api/admin/lp-pool/flows (24h inflows from primer contributions and regenerator investments, outflows from LP allocations), GET /api/admin/lp-pool/regeneration-rate (calculates investments/allocations × 100 with zero-division guard). Frontend uses safeParseNumber helper for all numeric parsing, error states with retry UI, and glassmorphism design matching admin investment aesthetic.
- **Project Investment Analytics (November 2025):** Per-project investment analytics accessible via Investment Analytics tab on project detail pages (admin only). Features: Hero metrics grid (Total Raised, Unique Investors, Avg Investment, Largest Investment), funding velocity cards (Daily/Weekly avg with 30-day stats, Projected Completion with estimated date), investment timeline chart (Recharts bar chart with daily/weekly intervals showing amount invested and investor count per period), and investor leaderboard (Top 10 investors by holdings with liquid/locked token breakdown, last investment date, and email anonymization toggle). Backend endpoints: GET /api/admin/projects/:id/investment-analytics (aggregate metrics with monetary velocity calculations using zero-investment guards), GET /api/admin/projects/:id/investors (investor list with optional anonymization query parameter), GET /api/admin/projects/:id/investment-timeline (daily/weekly aggregated data for charts). Frontend uses modular component architecture (InvestmentAnalytics, InvestmentTimelineChart, InvestorLeaderboard) with custom queryFn for proper query parameter handling, 30s auto-refresh, and premium glassmorphism design matching platform aesthetic.
- **Redemption System:** Allows users to sell project tokens for NGNTS, prioritizing funding from project cashflow, treasury, then the liquidity pool.
- **Bank Deposit System (FundingWizard):** A redesigned 3-step NGN→NGNTS deposit wizard inspired by PancakeSwap and FarmhouseClub. Step 1: Payment method selection (Bank Transfer or USDC "Coming Soon"). Step 2: PancakeSwap-style amount entry with real-time fee preview. Step 3: Professional invoice layout with copy buttons, bank details, and proof upload. The wizard features glassmorphism design, animated progress indicators, and proper state reset on all dismissal paths (backdrop click, Esc, Cancel). Fees (2% platform + Stellar gas) are calculated using shared utilities (shared/lib/depositFees.ts). Approved deposits automatically activate user wallets if needed and mint NGNTS from Treasury. Admin review interface provides comprehensive deposit management with audit trails via bankDepositDecisions table.
- **Wallet Activation Admin Interface:** Simplified admin approval for activating regenerator wallets. XLM for Stellar reserves and transaction fees (3.0 XLM) is automatically managed by the backend. Admins review and approve/reject wallet activation requests, triggering account creation and trustline setup.

### Known Limitations (MVP)
- **Investment Settlement Edge Cases:** In rare cases where an automatic refund fails after an investment payment, funds require manual admin intervention. A fully durable settlement system with a retry queue is planned for post-MVP.

## External Dependencies

### Third-Party Services
- **Supabase:** PostgreSQL database hosting and file storage.
- **Stellar Network:** Blockchain platform for tokenized assets and transactions.
- **CoinGecko API:** Used for live cryptocurrency exchange rates (e.g., USDC to NGN conversion).

### NPM Dependencies
- **Frontend:** `react`, `react-dom`, `vite`, `wouter`, `@tanstack/react-query`, `tailwindcss`, `@radix-ui/*`, `class-variance-authority`, `clsx`, `tailwind-merge`.
- **Backend:** `express`, `drizzle-orm`, `@neondatabase/serverless`, `drizzle-kit`, `jsonwebtoken`, `bcrypt`, `stellar-sdk`, `@supabase/supabase-js`, `multer`, `zod`, `drizzle-zod`.
- **Utilities:** `typescript`, `crypto`.